"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");require("core-js/modules/es.array.iterator"),Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.removeBrowsersync=exports.addBrowsersync=void 0;var _asyncToGenerator2=_interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator")),_api=require("../api");const BROWSERSYNC_DEPENDENCIES=["browser-sync","npm-run-all"],addBrowsersync=[{text:"Add Browsersync tasks to package.json",task:function(){var _ref=(0,_asyncToGenerator2.default)(function*({outputDirectory,port}){yield new _api.PackageJsonEditor().extend({scripts:{prestart:"npm run build:es",start:`npm-run-all --parallel watch:es watch:css serve`,serve:`browser-sync start --server ${outputDirectory} --files ${outputDirectory} --port ${port}`}}).commit()});return function task(){return _ref.apply(this,arguments)}}(),condition:({useParcel})=>(0,_api.allDoExist)("package.json","postcss.config.js")&&((0,_api.someDoExistSync)("webpack.config.js","rollup.config.js")||useParcel)// eslint-disable-line max-len
},{text:"Install Browsersync dependencies",task:({skipInstall})=>(0,_api.install)(BROWSERSYNC_DEPENDENCIES,{dev:!0,skipInstall}),condition:({skipInstall})=>!skipInstall&&(0,_api.allDoExist)("package.json")}];/**
 * @type {task[]}
 * @see https://www.browsersync.io/docs/command-line
 */exports.addBrowsersync=addBrowsersync;const removeBrowsersync=[{text:"Remove Browsersync tasks from package.json",task:function(){var _ref2=(0,_asyncToGenerator2.default)(function*(){yield new _api.PackageJsonEditor().extend({scripts:{prestart:void 0,start:void 0,serve:void 0}}).commit()});return function task(){return _ref2.apply(this,arguments)}}(),condition:()=>(0,_api.allDoExist)("package.json")},{text:"Uninstall Browsersync dependencies",task:()=>(0,_api.uninstall)(BROWSERSYNC_DEPENDENCIES),condition:()=>(0,_api.allDoExist)("package.json")&&new _api.PackageJsonEditor().hasAll(...BROWSERSYNC_DEPENDENCIES)}];exports.removeBrowsersync=removeBrowsersync;var _default=addBrowsersync;exports.default=_default;